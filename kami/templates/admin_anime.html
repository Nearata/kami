{% extends "dashboard.html" %}

{% block head_title %}
Anime |
{% endblock %}

{% block content %}
<div class="card">
    <div class="card__header">
        <h1 class="h1 card__title">Anime</h1>
    </div>
    <div class="card__body">
        {% if success %}
        <div class="alert alert--success">
            <div class="alert__message">{{ success }}</div>
        </div>
        {% endif %}
        {% if error %}
        <div class="alert alert--warning">
            <div class="alert__message">{{ error }}</div>
        </div>
        {% endif %}
        <div class="section">
            <h2 class="h2 section__title">Add</h2>
            <form id="admin-add-anime" class="form" method="post">
                <input type="hidden" name="formtype" value="add_anime">
                <div class="form__group">
                    <label class="label" for="name">Title</label>
                    <input class="input" type="text" name="name" placeholder="Title" autocomplete="off" required>
                </div>
                <div class="form__group">
                    <label class="label" for="fansub">Fansub</label>
                    <select id="select-add" name="fansub" placeholder="Fansub..." autocomplete="off">
                        <option value="">None</option>
                        {% for i in fansub %}
                        <option value="{{ i.name }}">{{ i.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form__group">
                    <label class="label" for="url">URLs <small>(one per line, formatted as 'name;url')</small></label>
                    <textarea class="input" name="url" cols="30" rows="10"></textarea>
                </div>
                <button class="button" type="submit">Add anime</button>
            </form>
        </div>
        <div class="section">
            <h2 class="h2 section__title">Remove</h2>
            <form class="form" method="post">
                <input type="hidden" name="formtype" value="remove_anime">
                <div class="form__group">
                    <select id="select-remove" name="name" placeholder="Anime..." autocomplete="off" required>
                        <option value="">None</option>
                        {% for i in anime %}
                        <option value="{{ i.name }}">{{ i.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <button class="button" type="submit">Remove anime</button>
            </form>
        </div>
        <div class="section">
            <h2 class="h2 section__title">Edit</h2>
            <form class="form" method="post">
                <input type="hidden" name="formtype" value="edit_anime">
                <div class="form__group">
                    <select id="select-edit" name="name" placeholder="Anime..." autocomplete="off" required>
                        <option value="">None</option>
                        {% for i in anime %}
                        <option value="{{ i.name }}">{{ i.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <button class="button" type="submit">Edit anime</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', path='css/tom-select.min.css') }}">
{% endblock %}

{% block js %}
<script src="{{ url_for('static', path='js/tom-select.base.min.js') }}"></script>
{% endblock %}
